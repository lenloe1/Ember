<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>Application Framework API Reference: ota.h Source File</title>

<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">

</head><body>

<table border="0" cellspacing="0" cellpadding="0"  width=100%>

<tr>

<td><img src="emberLogoSmallWebsiteVer.gif"></td>

<td> <div class="qindex">

<a class="qindex" href="main.html">Home</a>&nbsp;

 | &nbsp;<a class="qindex" href="modules.html">Modules</a>&nbsp;

 | &nbsp;<a class="qindex" href="annotated.html">Data Structures</a>&nbsp;

 | &nbsp;<a class="qindex" href="files.html">File List</a>&nbsp;

 | &nbsp;<a class="qindex" href="dirs.html">Directories</a>&nbsp;

 | &nbsp;<a class="qindex" href="globals.html">Index</a></div>

</td>

</table>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_fecac40be0af2076ed38531225652d23.html">app</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a4fb87c2c2a3c9408923edef982c913e.html">framework</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_221fa67d7fc82f1e2fb2f9d41e3472ce.html">plugin</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4013e42611224e2ece5cee605310fe55.html">ota-common</a>
  </div>
<div class="contents">
<h1>ota.h</h1><a href="ota_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// *******************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">// * ota.h</span>
<a name="l00003"></a>00003 <span class="comment">// *</span>
<a name="l00004"></a>00004 <span class="comment">// *</span>
<a name="l00005"></a>00005 <span class="comment">// * Copyright 2009 by Ember Corporation. All rights reserved.              *80*</span>
<a name="l00006"></a>00006 <span class="comment">// *******************************************************************</span>
<a name="l00007"></a>00007 <span class="keyword">enum</span> {
<a name="l00008"></a><a class="code" href="ota_8h.html#0411cd49bb5b71852cecd93bcbf0ca2d0c0d3d695799a966ed50fc9a60325ad4">00008</a>   <a class="code" href="ota_8h.html#0411cd49bb5b71852cecd93bcbf0ca2d0c0d3d695799a966ed50fc9a60325ad4">OTA_USE_OFFSET_TIME</a>,
<a name="l00009"></a><a class="code" href="ota_8h.html#0411cd49bb5b71852cecd93bcbf0ca2dda7659f948d04cc881fc14673f23da21">00009</a>   <a class="code" href="ota_8h.html#0411cd49bb5b71852cecd93bcbf0ca2dda7659f948d04cc881fc14673f23da21">OTA_USE_UTC_TIME</a>
<a name="l00010"></a>00010 };
<a name="l00011"></a><a class="code" href="ota_8h.html#775ad01edb531a72d906bdd7900ed4ee">00011</a> <span class="preprocessor">#define OTA_UPGRADE_END_RESPONSE_RUN_NOW  0x00</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span>
<a name="l00013"></a><a class="code" href="ota_8h.html#dc123c7f31fe3b966f610b8f01f57cc2">00013</a> <span class="preprocessor">#define MFG_ID_WILD_CARD        0xFFFF </span>
<a name="l00014"></a><a class="code" href="ota_8h.html#0f76ee16ad02adff7d864fa72ce29816">00014</a> <span class="preprocessor"></span><span class="preprocessor">#define IMAGE_TYPE_WILD_CARD    0xFFFF</span>
<a name="l00015"></a><a class="code" href="ota_8h.html#5b8618ded0f944a3474b3b6b84e47657">00015</a> <span class="preprocessor"></span><span class="preprocessor">#define IMAGE_TYPE_SECURITY     0xFFC0</span>
<a name="l00016"></a><a class="code" href="ota_8h.html#073be0c87f7382d0fe53228b877440c1">00016</a> <span class="preprocessor"></span><span class="preprocessor">#define IMAGE_TYPE_CONFIG       0xFFC1</span>
<a name="l00017"></a><a class="code" href="ota_8h.html#bef4bfe644c6c0bce973a7d3dc283dac">00017</a> <span class="preprocessor"></span><span class="preprocessor">#define IMAGE_TYPE_LOG          0xFFC2</span>
<a name="l00018"></a><a class="code" href="ota_8h.html#8d8ad8a0e19ed802dddfc0ddba7ce056">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define FILE_VERSION_WILD_CARD  0xFFFFFFFF</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a><a class="code" href="ota_8h.html#ff1e32d8fd9d13d7a4035d402dd76d24">00020</a> <span class="preprocessor">#define ZIGBEE_2006_STACK_VERSION 0x0000</span>
<a name="l00021"></a><a class="code" href="ota_8h.html#d3882aabba4758f35ea86c80d7333fc0">00021</a> <span class="preprocessor"></span><span class="preprocessor">#define ZIGBEE_2007_STACK_VERSION 0x0001</span>
<a name="l00022"></a><a class="code" href="ota_8h.html#c4a805f357eb2bcb76f6b799382ebbfc">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define ZIGBEE_PRO_STACK_VERSION  0x0002</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="comment">// These apply to the field control of the Over-the-air messages</span>
<a name="l00025"></a><a class="code" href="ota_8h.html#1567b3efccdbe9b849be850b1de454e9">00025</a> <span class="preprocessor">#define OTA_HW_VERSION_BIT_MASK   0x01</span>
<a name="l00026"></a><a class="code" href="ota_8h.html#cc874b2b23c388b30342368256761845">00026</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_NODE_EUI64_BIT_MASK   0x01</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="comment">// OTA Upgrade status as defined by OTA cluster spec.</span>
<a name="l00029"></a>00029 <span class="keyword">enum</span> {
<a name="l00030"></a><a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c60045f9395290b3d32c7140b50f91c8fb15">00030</a>   <a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c60045f9395290b3d32c7140b50f91c8fb15">OTA_UPGRADE_STATUS_NORMAL</a>,
<a name="l00031"></a><a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600d8aac490460448d3ba7b3e98b7f27fee">00031</a>   <a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600d8aac490460448d3ba7b3e98b7f27fee">OTA_UPGRADE_STATUS_DOWNLOAD_IN_PROGRESS</a>,
<a name="l00032"></a><a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600a46a5dddeaba278a758a2af0f54a317c">00032</a>   <a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600a46a5dddeaba278a758a2af0f54a317c">OTA_UPGRADE_STATUS_DOWNLOAD_COMPLETE</a>,
<a name="l00033"></a><a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600367e3493f0490576ad41e8fdcea20666">00033</a>   <a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600367e3493f0490576ad41e8fdcea20666">OTA_UPGRADE_STATUS_WAIT</a>,
<a name="l00034"></a><a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600ef1d1564d23e12cbed8397f805620311">00034</a>   <a class="code" href="ota_8h.html#bed82baf7f470b522273a3e37c24c600ef1d1564d23e12cbed8397f805620311">OTA_UPGRADE_STATUS_COUNTDOWN</a>
<a name="l00035"></a>00035 };
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="ota_8h.html#d346271dc616b08b41e47ad6b199b689">00037</a> <span class="preprocessor">#define OTA_TAG_UPGRADE_IMAGE               0x0000</span>
<a name="l00038"></a><a class="code" href="ota_8h.html#c4944f19a35bd86efd7106dd9bf359dc">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_TAG_ECDSA_SIGNATURE             0x0001</span>
<a name="l00039"></a><a class="code" href="ota_8h.html#fe72959ac06ba01a30e4911d118c7402">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_TAG_ECDSA_SIGNING_CERTIFICATE   0x0002</span>
<a name="l00040"></a><a class="code" href="ota_8h.html#cca4540620f06c147b61c5c7200b575f">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_TAG_RESERVED_START              0x0003</span>
<a name="l00041"></a><a class="code" href="ota_8h.html#64547835f7008cdc4489c2c3fc9eb097">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_TAG_RESERVED_END                0xEFFF</span>
<a name="l00042"></a><a class="code" href="ota_8h.html#f739e8c2ce37086a16c490c700df32ab">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define OTA_TAG_MANUFACTURER_SPECIFIC_START 0xFFFF</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="keyword">extern</span> EmberNodeId <a class="code" href="ota_8h.html#245540a04cce8d49902a1f5c8235c853">upgradeServerNodeId</a>;
<a name="l00045"></a>00045 <span class="keyword">extern</span> PGM int8u <a class="code" href="ota_8h.html#29cb7d8f57443a0d3077ea5165272761">emAfOtaMinMessageLengths</a>[];
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="ota_8h.html#b6ef51e9528a43808dbc6b9defde9d94">00047</a> <span class="preprocessor">#define EM_AF_OTA_MAX_COMMAND_ID ZCL_QUERY_SPECIFIC_FILE_RESPONSE_COMMAND_ID</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 <span class="comment">// Create a shorter name for printing to make the code more readable.</span>
<a name="l00050"></a><a class="code" href="ota_8h.html#c15b869ba9050b739e5181f49c2b0b5f">00050</a> <span class="preprocessor">#define otaPrintln(...) emberAfOtaBootloadClusterPrintln(__VA_ARGS__)</span>
<a name="l00051"></a><a class="code" href="ota_8h.html#8b1181f7eaac96af21359566e4f8848c">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define otaPrint(...) emberAfOtaBootloadClusterPrint(__VA_ARGS__)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a>00053 <span class="comment">// -------------------------------------------------------</span>
<a name="l00054"></a>00054 <span class="comment">// Common to both client and server</span>
<a name="l00055"></a>00055 <span class="comment">// -------------------------------------------------------</span>
<a name="l00056"></a>00056 <a class="code" href="structEmberAfOtaImageId.html" title="This is a unique identifier for referencing ZigBee Over-the-air upgrade images. It...">EmberAfOtaImageId</a> <a class="code" href="ota_8h.html#3a861967de2fe5f87465b3428199965c">emAfOtaCreateEmberAfOtaImageIdStruct</a>(int16u manufacturerId,
<a name="l00057"></a>00057                                          int16u imageType,
<a name="l00058"></a>00058                                          int32u fileVersion);
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 int8u <a class="code" href="ota_8h.html#d258f86b04d4338ff5fdebe27d9c3b61">emAfOtaParseImageIdFromMessage</a>(<a class="code" href="structEmberAfOtaImageId.html" title="This is a unique identifier for referencing ZigBee Over-the-air upgrade images. It...">EmberAfOtaImageId</a>* returnId, 
<a name="l00061"></a>00061                                      <span class="keyword">const</span> int8u* buffer, 
<a name="l00062"></a>00062                                      int8u length);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="preprocessor">#if defined(EMBER_AF_PRINT_CORE)</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="ota_8h.html#bf16f8e326b80a238daa2dbcd08cb7d3">emAfPrintPercentageSetStartAndEnd</a>(int32u startingOffset, int32u endOffset);
<a name="l00066"></a>00066 int8u <a class="code" href="ota_8h.html#8816a02a76d352cb61ea3fba602994bd">emAfPrintPercentageUpdate</a>(PGM_P prefixString, 
<a name="l00067"></a>00067                                int8u updateFrequency, 
<a name="l00068"></a>00068                                int32u currentOffset);
<a name="l00069"></a>00069 <span class="preprocessor">#else</span>
<a name="l00070"></a><a class="code" href="ota_8h.html#bf16f8e326b80a238daa2dbcd08cb7d3">00070</a> <span class="preprocessor"></span><span class="preprocessor">  #define emAfPrintPercentageSetStartAndEnd(x,y)</span>
<a name="l00071"></a><a class="code" href="ota_8h.html#8816a02a76d352cb61ea3fba602994bd">00071</a> <span class="preprocessor"></span><span class="preprocessor">  #define emAfPrintPercentageUpdate(x,y,z)</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1">

<table border="0" cellspacing="0" cellpadding="0" width=100%>

<tr>

<td><address><small>

Application Framework API Reference. <br>

Application Framework V2.

</small></address>

</td>

<td align="right">

<address><small>

Copyright &copy; 2006-2010 by Ember Corporation. All rights reserved.<br>

Generated Tue Mar 15 16:12:31 2011 with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.5.8.

</small></address>

</td>

</tr>

</table>

</body>

</html>
