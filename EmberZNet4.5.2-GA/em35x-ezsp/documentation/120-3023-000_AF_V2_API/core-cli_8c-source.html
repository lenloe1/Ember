<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>Application Framework API Reference: core-cli.c Source File</title>

<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">

</head><body>

<table border="0" cellspacing="0" cellpadding="0"  width=100%>

<tr>

<td><img src="emberLogoSmallWebsiteVer.gif"></td>

<td> <div class="qindex">

<a class="qindex" href="main.html">Home</a>&nbsp;

 | &nbsp;<a class="qindex" href="modules.html">Modules</a>&nbsp;

 | &nbsp;<a class="qindex" href="annotated.html">Data Structures</a>&nbsp;

 | &nbsp;<a class="qindex" href="files.html">File List</a>&nbsp;

 | &nbsp;<a class="qindex" href="dirs.html">Directories</a>&nbsp;

 | &nbsp;<a class="qindex" href="globals.html">Index</a></div>

</td>

</table>
<!-- Generated by Doxygen 1.5.8 -->
  <div class="navpath"><a class="el" href="dir_fecac40be0af2076ed38531225652d23.html">app</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_a4fb87c2c2a3c9408923edef982c913e.html">framework</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4ef1a1979ebdccd27c7586c656acac0e.html">cli</a>
  </div>
<div class="contents">
<h1>core-cli.c</h1><a href="core-cli_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// *****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">// * core-cli.c</span>
<a name="l00003"></a>00003 <span class="comment">// *</span>
<a name="l00004"></a>00004 <span class="comment">// * Core CLI commands used by all applications regardless of profile.</span>
<a name="l00005"></a>00005 <span class="comment">// *</span>
<a name="l00006"></a>00006 <span class="comment">// * Copyright 2010 by Ember Corporation. All rights reserved.              *80*</span>
<a name="l00007"></a>00007 <span class="comment">// *****************************************************************************</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment">// common include file</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include "app/framework/util/common.h"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "app/framework/util/af-main.h"</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include "app/util/serial/command-interpreter2.h"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "stack/include/library.h"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "app/framework/security/af-security.h"</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#if !defined(EZSP_HOST)</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">  #include "stack/include/cbke-crypto-engine.h"</span>  <span class="comment">// emberGetCertificate()</span>
<a name="l00019"></a>00019 <span class="preprocessor">#endif</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00022"></a>00022 <span class="comment">// Forward declarations</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">static</span> <span class="keywordtype">void</span> printOnCommand(<span class="keywordtype">void</span>);
<a name="l00025"></a>00025 <span class="keyword">static</span> <span class="keywordtype">void</span> printOffCommand(<span class="keywordtype">void</span>);
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00028"></a>00028 <span class="comment">// Globals </span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#ifdef EMBER_TEST</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="keyword">static</span> PGM_NO_CONST PGM_P counterStrings[] = {
<a name="l00032"></a>00032   EMBER_COUNTER_STRINGS
<a name="l00033"></a>00033 };
<a name="l00034"></a>00034 <span class="preprocessor">#endif //EMBER_TEST</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a>00036 
<a name="l00063"></a><a class="code" href="group__cli.html#g8834ad94a94b5b9fdc1a4a28a3c7e65c">00063</a> <span class="preprocessor">#define EMBER_AF_DOXYGEN_CLI__DEBUG_PRINT_COMMANDS</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="core-cli_8h.html#1a0037828fefec940be032bec191656c">00065</a> EmberCommandEntry <a class="code" href="core-cli_8c.html#1a0037828fefec940be032bec191656c">debugPrintCommands</a>[] = {
<a name="l00066"></a>00066   {<span class="stringliteral">"status"</span>, <a class="code" href="group__af.html#g1b72529fe9aeb310f70bd51ec8442283" title="prints current status of functional areas">emberAfPrintStatus</a>, <span class="stringliteral">""</span>},
<a name="l00067"></a>00067   {<span class="stringliteral">"all_on"</span>, <a class="code" href="group__af.html#g6fb47e22ca374caee4d5a325ff5324e7" title="turns on debugging for all functional areas">emberAfPrintAllOn</a>, <span class="stringliteral">""</span>},
<a name="l00068"></a>00068   {<span class="stringliteral">"all_off"</span>, <a class="code" href="group__af.html#g86df92da1e1cac093909feffd470be3f" title="turns off debugging for all functional areas">emberAfPrintAllOff</a>, <span class="stringliteral">""</span>},
<a name="l00069"></a>00069   {<span class="stringliteral">"on"</span>, printOnCommand, <span class="stringliteral">"v"</span>},
<a name="l00070"></a>00070   {<span class="stringliteral">"off"</span>, printOffCommand, <span class="stringliteral">"v"</span>},
<a name="l00071"></a>00071   { NULL }
<a name="l00072"></a>00072 };
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">//------------------------------------------------------------------------------</span>
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="keyword">static</span> <span class="keywordtype">void</span> printPacketBuffers(<span class="keywordtype">void</span>)
<a name="l00077"></a>00077 {
<a name="l00078"></a>00078   <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"Buffs: %d / %d"</span>,
<a name="l00079"></a>00079                     emAfGetPacketBufferFreeCount(),
<a name="l00080"></a>00080                     emAfGetPacketBufferTotalCount());
<a name="l00081"></a>00081 }
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="core-cli_8h.html#e3c8f7c22791b5a454e313cc62e6626d">00083</a> <span class="keywordtype">void</span> <a class="code" href="core-cli_8c.html#e3c8f7c22791b5a454e313cc62e6626d">emAfCliCountersCommand</a>(<span class="keywordtype">void</span>)
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085 <span class="preprocessor">#if defined(EMBER_AF_PRINT_ENABLE) &amp;&amp; defined(EMBER_AF_PRINT_APP)</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>  int8u i;
<a name="l00087"></a>00087   int16u counters[EMBER_COUNTER_TYPE_COUNT];
<a name="l00088"></a>00088   
<a name="l00089"></a>00089   emAfCopyCounterValues(counters);
<a name="l00090"></a>00090   <span class="keywordflow">for</span> (i=0; i &lt; EMBER_COUNTER_TYPE_COUNT; i++) {
<a name="l00091"></a>00091 <span class="preprocessor">#ifdef EMBER_TEST</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>    <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"%d: %p = %d"</span>,
<a name="l00093"></a>00093                       i,
<a name="l00094"></a>00094                       counterStrings[i],
<a name="l00095"></a>00095                       counters[i]);
<a name="l00096"></a>00096 <span class="preprocessor">#else //EMBER_TEST</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span>    <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"%d: %d"</span>,
<a name="l00098"></a>00098                       i,
<a name="l00099"></a>00099                       counters[i]);
<a name="l00100"></a>00100 <span class="preprocessor">#endif //EMBER_TEST</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span>    <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00102"></a>00102   }
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">""</span>);
<a name="l00105"></a>00105   printPacketBuffers();
<a name="l00106"></a>00106 <span class="preprocessor">#endif //defined(EMBER_AF_PRINT_ENABLE) &amp;&amp; defined(EMBER_AF_PRINT_APP)</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span>}
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="keyword">static</span> <span class="keywordtype">void</span> printOnCommand(<span class="keywordtype">void</span>)
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111   int16u area = emberUnsignedCommandArgument(0);
<a name="l00112"></a>00112   <a class="code" href="group__af.html#g48c61a6eb9e64b3517cfb60351b9f7f5" title="turns on debugging for certain functional area">emberAfPrintOn</a>(area);
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115 <span class="keyword">static</span> <span class="keywordtype">void</span> printOffCommand(<span class="keywordtype">void</span>)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   int16u area = emberUnsignedCommandArgument(0);
<a name="l00118"></a>00118   <a class="code" href="group__af.html#gb41bb135732f8175ac683932533d4743" title="turns off debugging for certain functional area">emberAfPrintOff</a>(area);
<a name="l00119"></a>00119 }
<a name="l00120"></a>00120 
<a name="l00121"></a><a class="code" href="core-cli_8h.html#5e578d180865a608324d88d85bb0ca73">00121</a> <span class="keywordtype">void</span> <a class="code" href="core-cli_8c.html#5e578d180865a608324d88d85bb0ca73">emAfCliResetCommand</a>(<span class="keywordtype">void</span>)
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123   halReboot();
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125                               
<a name="l00126"></a><a class="code" href="core-cli_8h.html#c76dda5c97cab40f60d06c1bc7daefa9">00126</a> <span class="keywordtype">void</span> <a class="code" href="core-cli_8c.html#c76dda5c97cab40f60d06c1bc7daefa9">emAfCliHelpCommand</a>(<span class="keywordtype">void</span>)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 <span class="preprocessor">#if defined(EMBER_AF_PRINT_ENABLE) &amp;&amp; defined(EMBER_AF_PRINT_APP)</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>  EmberCommandEntry *commandFinger = emberCommandTable;
<a name="l00131"></a>00131   <span class="keywordflow">for</span> (; commandFinger-&gt;name != NULL; commandFinger++) {
<a name="l00132"></a>00132     <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"%p"</span>, commandFinger-&gt;name);
<a name="l00133"></a>00133     <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00134"></a>00134   }
<a name="l00135"></a>00135 <span class="preprocessor">#endif //defined(EMBER_AF_PRINT_ENABLE) &amp;&amp; defined(EMBER_AF_PRINT_APP)</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span>}
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 <span class="keyword">static</span> <span class="keywordtype">void</span> printMfgString(<span class="keywordtype">void</span>)
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141   int8u i;
<a name="l00142"></a>00142   int8u mfgString[MFG_STRING_MAX_LENGTH + 1];
<a name="l00143"></a>00143   emberAfGetMfgString(mfgString);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="keywordflow">for</span> (i = 0; i &lt; MFG_STRING_MAX_LENGTH; i++) {
<a name="l00146"></a>00146     <span class="comment">// The MFG string is not necessarily NULL terminated.</span>
<a name="l00147"></a>00147     <span class="comment">// Uninitialized bytes are left at 0xFF so we make sure</span>
<a name="l00148"></a>00148     <span class="comment">// it is NULL terminated.</span>
<a name="l00149"></a>00149     <span class="keywordflow">if</span> (mfgString[i] == 0xFF) {
<a name="l00150"></a>00150       mfgString[i] = <span class="charliteral">'\0'</span>;
<a name="l00151"></a>00151     }
<a name="l00152"></a>00152   }
<a name="l00153"></a>00153   mfgString[MFG_STRING_MAX_LENGTH] = <span class="charliteral">'\0'</span>;
<a name="l00154"></a>00154   
<a name="l00155"></a>00155   <span class="comment">// Note:  We use '%s' here because this is a RAM string.  Normally</span>
<a name="l00156"></a>00156   <span class="comment">// most strings are literals or constants in flash and use '%p'.</span>
<a name="l00157"></a>00157   <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"MFG String: %s"</span>, mfgString);
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="keyword">static</span> <span class="keywordtype">boolean</span> printSmartEnergySecurityInfo(<span class="keywordtype">void</span>)
<a name="l00161"></a>00161 {
<a name="l00162"></a>00162 <span class="preprocessor">#if EMBER_AF_SECURITY_PROFILE == SE_SECURITY_PROFILE_FULL || EMBER_AF_SECURITY_PROFILE == SE_SECURITY_PROFILE_TEST</span>
<a name="l00163"></a>00163 <span class="preprocessor"></span>  <span class="keywordtype">boolean</span> securityGood = TRUE;
<a name="l00164"></a>00164   <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"SE Security Info ["</span>);
<a name="l00165"></a>00165   {
<a name="l00166"></a>00166     <span class="comment">// for SE security, print the state of ECC, CBKE, and the programmed Cert</span>
<a name="l00167"></a>00167     EmberCertificateData cert;
<a name="l00168"></a>00168     EmberStatus status = emberGetCertificate(&amp;cert);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170     <span class="comment">// check the status of the ECC library</span>
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (emberGetLibraryStatus(EMBER_ECC_LIBRARY_ID)
<a name="l00172"></a>00172         &amp; EMBER_LIBRARY_PRESENT_MASK) {
<a name="l00173"></a>00173       <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"RealEcc "</span>);
<a name="l00174"></a>00174     } <span class="keywordflow">else</span> {
<a name="l00175"></a>00175       <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"NoEcc "</span>);
<a name="l00176"></a>00176       securityGood = FALSE;
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="comment">// status of EMBER_LIBRARY_NOT_PRESENT means the CBKE is not present</span>
<a name="l00180"></a>00180     <span class="comment">// in the image.  We don't know anything about the certificate.</span>
<a name="l00181"></a>00181     <span class="keywordflow">if</span> (status == EMBER_LIBRARY_NOT_PRESENT) {
<a name="l00182"></a>00182       <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"NoCbke UnknownCert"</span>);
<a name="l00183"></a>00183       securityGood = FALSE;
<a name="l00184"></a>00184     } <span class="keywordflow">else</span> {
<a name="l00185"></a>00185       <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"RealCbke "</span>);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187       <span class="comment">// status of EMBER_SUCCESS means the cert is ok</span>
<a name="l00188"></a>00188       <span class="keywordflow">if</span> (status == EMBER_SUCCESS) {
<a name="l00189"></a>00189         <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"GoodCert"</span>);
<a name="l00190"></a>00190       }
<a name="l00191"></a>00191       <span class="comment">// status of EMBER_ERR_FATAL means the cert failed</span>
<a name="l00192"></a>00192       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == EMBER_ERR_FATAL) {
<a name="l00193"></a>00193         <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"BadCert"</span>);
<a name="l00194"></a>00194         securityGood = FALSE;
<a name="l00195"></a>00195       }
<a name="l00196"></a>00196     }
<a name="l00197"></a>00197     <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"]"</span>);
<a name="l00198"></a>00198   }
<a name="l00199"></a>00199   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00200"></a>00200   <span class="keywordflow">return</span> securityGood;
<a name="l00201"></a>00201 <span class="preprocessor">#else</span>
<a name="l00202"></a>00202 <span class="preprocessor"></span>  <span class="keywordflow">return</span> FALSE;
<a name="l00203"></a>00203 <span class="preprocessor">#endif</span>
<a name="l00204"></a>00204 <span class="preprocessor"></span>}
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">// *****************************</span>
<a name="l00207"></a>00207 <span class="comment">// infoCommand</span>
<a name="l00208"></a>00208 <span class="comment">//</span>
<a name="l00209"></a>00209 <span class="comment">// info &lt;no arguments&gt;</span>
<a name="l00210"></a>00210 <span class="comment">// *****************************</span>
<a name="l00211"></a>00211 
<a name="l00212"></a><a class="code" href="core-cli_8h.html#aade63cbd03aed304162685e2edac4b0">00212</a> <span class="keywordtype">void</span> <a class="code" href="core-cli_8c.html#aade63cbd03aed304162685e2edac4b0">emAfCliInfoCommand</a>(<span class="keywordtype">void</span>)
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214   EmberNodeType nodeTypeResult = 0xFF;
<a name="l00215"></a>00215   int8u commandLength;
<a name="l00216"></a>00216   EmberEUI64 myEui64;
<a name="l00217"></a>00217   EmberNetworkParameters networkParams;
<a name="l00218"></a>00218   emberStringCommandArgument(-1, &amp;commandLength);
<a name="l00219"></a>00219   printMfgString();
<a name="l00220"></a>00220   <a class="code" href="group__af.html#ge39560455a5025b2ac8d69e4aa65b04e" title="populates the eui64 with the local eui64.">emberAfGetEui64</a>(myEui64);
<a name="l00221"></a>00221   emberAfGetNetworkParameters(&amp;nodeTypeResult, &amp;networkParams);
<a name="l00222"></a>00222   <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"node ["</span>);
<a name="l00223"></a>00223   <a class="code" href="group__af.html#g18ddcce71fd7bb3cc1b750097f291676" title="prints eui64 stored in big endian format">emberAfPrintBigEndianEui64</a>(myEui64);
<a name="l00224"></a>00224   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00225"></a>00225   <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"] chan [%d] pwr [0x%x]"</span>,
<a name="l00226"></a>00226                       networkParams.radioChannel,
<a name="l00227"></a>00227                       networkParams.radioTxPower);
<a name="l00228"></a>00228   <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"panID [0x%2x] nodeID [0x%2x] "</span>,
<a name="l00229"></a>00229                  networkParams.panId,
<a name="l00230"></a>00230                  emberGetNodeId());
<a name="l00231"></a>00231   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00232"></a>00232   <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"xpan [0x"</span>);
<a name="l00233"></a>00233   <a class="code" href="group__af.html#g18ddcce71fd7bb3cc1b750097f291676" title="prints eui64 stored in big endian format">emberAfPrintBigEndianEui64</a>(networkParams.extendedPanId);
<a name="l00234"></a>00234   <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"]"</span>);
<a name="l00235"></a>00235   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   emAfCliVersionCommand();
<a name="l00238"></a>00238   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00239"></a>00239 
<a name="l00240"></a>00240   <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"nodeType ["</span>);
<a name="l00241"></a>00241   <span class="keywordflow">if</span> (nodeTypeResult != 0xFF) {
<a name="l00242"></a>00242     <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"0x%x"</span>, nodeTypeResult);
<a name="l00243"></a>00243   } <span class="keywordflow">else</span> {
<a name="l00244"></a>00244     <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"unknown"</span>);
<a name="l00245"></a>00245   }
<a name="l00246"></a>00246   <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"]"</span>);
<a name="l00247"></a>00247   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   printSecurityProfile();
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   printSmartEnergySecurityInfo();
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"network state [%x] "</span>, emberNetworkState());
<a name="l00254"></a>00254   printPacketBuffers();
<a name="l00255"></a>00255   <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <span class="comment">// print the endpoint information</span>
<a name="l00258"></a>00258   {
<a name="l00259"></a>00259     int8u i, j;
<a name="l00260"></a>00260     <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"Ep cnt: %d"</span>, <a class="code" href="group__af.html#g12cf02d285be828b64a5fd256e06dcd6" title="Returns the number of endpoints.">emberAfEndpointCount</a>());
<a name="l00261"></a>00261     <span class="comment">// loop for each endpoint</span>
<a name="l00262"></a>00262     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__af.html#g12cf02d285be828b64a5fd256e06dcd6" title="Returns the number of endpoints.">emberAfEndpointCount</a>(); i++) {
<a name="l00263"></a>00263       <a class="code" href="structEmberAfEndpointType.html" title="Endpoint type struct describes clusters that are on the endpoint.">EmberAfEndpointType</a> *et = <a class="code" href="group__af.html#gdea929ff7caa3aa37e207aebfcc0f7c7" title="macro that returns true if attribute is read only.">endpoints</a>[i].<a class="code" href="structEmberAfDefinedEndpoint.html#f6ea50f152c24e38d5c0dd0592970523">endpointType</a>;
<a name="l00264"></a>00264       <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"ep %d [%p] "</span>,
<a name="l00265"></a>00265                  <a class="code" href="group__af.html#gf98f35ad2ee6c9032c13758580e47db6" title="Macro that takes index of endpoint, and returns Zigbee endpoint.">emberAfEndpointFromIndex</a>(i),
<a name="l00266"></a>00266                  <a class="code" href="group__af.html#g2a6e6335d534a83c7a940dc9625a3e19" title="Function that checks if endpoint is enabled.">emberAfIsDeviceEnabled</a>(<a class="code" href="group__af.html#gf98f35ad2ee6c9032c13758580e47db6" title="Macro that takes index of endpoint, and returns Zigbee endpoint.">emberAfEndpointFromIndex</a>(i))
<a name="l00267"></a>00267                  ? <span class="stringliteral">"enabled"</span> 
<a name="l00268"></a>00268                  : <span class="stringliteral">"disabled"</span>);
<a name="l00269"></a>00269       <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">"profile [0x%2x] devId [0x%2x] ver [0x%x]"</span>,
<a name="l00270"></a>00270                         <a class="code" href="group__af.html#ge0841ee13160817302032f31c739bc10" title="Macro that takes index of endpoint, and returns profile Id for it.">emberAfProfileIdFromIndex</a>(i),
<a name="l00271"></a>00271                         <a class="code" href="group__af.html#g8ea7ce1308bdedd22b86a15a524b6e40" title="Macro that takes index of endpoint, and returns device Id for it.">emberAfDeviceIdFromIndex</a>(i),
<a name="l00272"></a>00272                         <a class="code" href="group__af.html#g2a7e2d2a33104af32cbc59d82e60d16c" title="Macro that takes index of endpoint, and returns device version for it.">emberAfDeviceVersionFromIndex</a>(i));    
<a name="l00273"></a>00273       <span class="comment">// loop for the clusters within the endpoint</span>
<a name="l00274"></a>00274       <span class="keywordflow">for</span> (j = 0; j &lt; et-&gt;<a class="code" href="structEmberAfEndpointType.html#1a726fd97191c1ef8af3dfb22e4b0cbc">clusterCount</a>; j++) {
<a name="l00275"></a>00275         <a class="code" href="structEmberAfCluster.html" title="Struct describing cluster.">EmberAfCluster</a> *zc = &amp;(et-&gt;<a class="code" href="structEmberAfEndpointType.html#8f8d90d59eb1025498f7f018e63ca615">cluster</a>[j]);
<a name="l00276"></a>00276         <a class="code" href="debug-printing_8h.html#c7f24e99a4506f2138c1ce82b60a2d4e">emberAfAppPrint</a>(<span class="stringliteral">"    %p cluster: 0x%2x "</span>, 
<a name="l00277"></a>00277                        (emberAfClusterIsClient(zc)
<a name="l00278"></a>00278                         ? <span class="stringliteral">"out(client)"</span>
<a name="l00279"></a>00279                         : <span class="stringliteral">"in (server)"</span> ),
<a name="l00280"></a>00280                        zc-&gt;<a class="code" href="structEmberAfCluster.html#b12348d25f86b7368d5b365cd290454a">clusterId</a>);
<a name="l00281"></a>00281         emberAfDecodeAndPrintCluster(zc-&gt;<a class="code" href="structEmberAfCluster.html#b12348d25f86b7368d5b365cd290454a">clusterId</a>);
<a name="l00282"></a>00282         <a class="code" href="debug-printing_8h.html#1fbed20f2364991963c40f135218f854">emberAfAppPrintln</a>(<span class="stringliteral">""</span>);
<a name="l00283"></a>00283         <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00284"></a>00284       }
<a name="l00285"></a>00285       <a class="code" href="debug-printing_8h.html#ea0772af28af33068bac0fad99a4feaf">emberAfAppFlush</a>();
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287   }
<a name="l00288"></a>00288 }
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="core-cli_8h.html#2216c29c64ad2170588cde9a1d6bc0b0">00290</a> <span class="keywordtype">void</span> <a class="code" href="core-cli_8c.html#2216c29c64ad2170588cde9a1d6bc0b0">emAfCliEchoCommand</a>(<span class="keywordtype">void</span>)
<a name="l00291"></a>00291 {
<a name="l00292"></a>00292   int8u echoOn = emberUnsignedCommandArgument(0);
<a name="l00293"></a>00293   <span class="keywordflow">if</span> ( echoOn ) {
<a name="l00294"></a>00294     emberCommandInterpreterEchoOn();
<a name="l00295"></a>00295   } <span class="keywordflow">else</span> {
<a name="l00296"></a>00296     emberCommandInterpreterEchoOff();
<a name="l00297"></a>00297   }
<a name="l00298"></a>00298 }
</pre></div></div>
<hr size="1">

<table border="0" cellspacing="0" cellpadding="0" width=100%>

<tr>

<td><address><small>

Application Framework API Reference. <br>

Application Framework V2.

</small></address>

</td>

<td align="right">

<address><small>

Copyright &copy; 2006-2010 by Ember Corporation. All rights reserved.<br>

Generated Tue Oct 12 10:24:37 2010 with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.5.8.

</small></address>

</td>

</tr>

</table>

</body>

</html>
