<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>EmberZNet API Reference: For the STM32F103RET Host platform: Bootloader EEPROM Control</title>

<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">

</head><body>

<table border="0" cellspacing="0" cellpadding="0"  width=100%>

<tr>

<td><img src="emberLogoSmallWebsiteVer.gif"></td>

<td> <div class="qindex">

<a class="qindex" href="main.htm">Home</a>&nbsp;

 | &nbsp;<a class="qindex" href="modules.htm">Modules</a>&nbsp;

 | &nbsp;<a class="qindex" href="annotated.htm">Data Structures</a>&nbsp;

 | &nbsp;<a class="qindex" href="files.htm">File List</a>&nbsp;

 | &nbsp;<a class="qindex" href="dirs.htm">Directories</a>&nbsp;

 | &nbsp;<a class="qindex" href="globals.htm">Index</a></div>

</td>

</table>
<!-- Generated by Doxygen 1.6.1 -->
<div class="contents">
<h1>Bootloader EEPROM Control<br/>
<small>
[<a class="el" href="group__peripherals.htm">Sample APIs for Peripheral Access</a>]</small>
</h1>
<p>Functions and definitions for generic EEPROM operation.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#gaddfda15f5f3ec6f8f325f48be50c548a">EEPROM_PAGE_SIZE</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga9fac273da1575c57078466dbefd7cdb9">EEPROM_FIRST_PAGE</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga92b685f05275ad5b3d65a2e8262350c0">EEPROM_IMAGE_START</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga22f4fb5c642cc23a258ae9b7a7b121ef">EEPROM_SUCCESS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga4aa47e5ef3df122e13548e26cb732a24">EEPROM_ERR</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#gab8dba7d65be66c2ef7f1caab02212c33">EEPROM_ERR_MASK</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga85826037a1733414ce23d7cd02b273ba">EEPROM_ERR_PG_BOUNDARY</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#gac5440bb04d861b39c11d9afeb9ad0dc8">EEPROM_ERR_PG_SZ</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga38b1c4d3b6606e56dcb93551062182a4">EEPROM_ERR_WRT_DATA</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga1f5de1268dd43506b5d4990ca05e8a6d">EEPROM_ERR_IMG_SZ</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga9a31978c04944110d98a61f54e7b08e1">EEPROM_ERR_ADDR</a></td></tr>
<tr><td colspan="2"><h2>EEPROM interaction functions.</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpe9d229e797153df79f209e2d11022bda"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#gabf9065877f2f5669ca2754d300aa97b2">halEepromInit</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#gadf40eadf7ac2f56747fe8ea5a92c0470">halEepromShutdown</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#ga798b3a04d68c97f03e1366c012fd4099">halEepromRead</a> (<a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a> address, <a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *data, <a class="el" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37">int16u</a> len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__bootloader__eeprom.htm#gaed9c1417980d7bf93ebe875a416a0e16">halEepromWrite</a> (<a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a> address, const <a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *data, <a class="el" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37">int16u</a> len)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Functions and definitions for generic EEPROM operation. </p>
<p>Changing EEPROM size will change the size of the application image space without changing the size or relative location of the recovery and reserved sections. See eeprom.c for more information on modifying EEPROM functionality.</p>
<p>See <a class="el" href="bootloader-eeprom_8h.htm">bootloader-eeprom.h</a> for source code. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gaddfda15f5f3ec6f8f325f48be50c548a"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_PAGE_SIZE" ref="gaddfda15f5f3ec6f8f325f48be50c548a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_PAGE_SIZE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition of an EEPROM page size, in bytes. The current interface assumes all eeproms have 128 byte pages. If a device has a different physical page size, the driver needs to abstract it to a 128 byte page. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00024">24</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9fac273da1575c57078466dbefd7cdb9"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_FIRST_PAGE" ref="ga9fac273da1575c57078466dbefd7cdb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_FIRST_PAGE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define the location of the first page in EEPROM. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00028">28</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga92b685f05275ad5b3d65a2e8262350c0"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_IMAGE_START" ref="ga92b685f05275ad5b3d65a2e8262350c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_IMAGE_START</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define the location of the image start in EEPROM as a function of the <a class="el" href="group__bootloader__eeprom.htm#ga9fac273da1575c57078466dbefd7cdb9" title="Define the location of the first page in EEPROM.">EEPROM_FIRST_PAGE</a> and <a class="el" href="group__bootloader__eeprom.htm#gaddfda15f5f3ec6f8f325f48be50c548a" title="Definition of an EEPROM page size, in bytes. The current interface assumes all eeproms...">EEPROM_PAGE_SIZE</a>. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00033">33</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga22f4fb5c642cc23a258ae9b7a7b121ef"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_SUCCESS" ref="ga22f4fb5c642cc23a258ae9b7a7b121ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_SUCCESS</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM success status. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00037">37</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4aa47e5ef3df122e13548e26cb732a24"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR" ref="ga4aa47e5ef3df122e13548e26cb732a24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM error status. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00041">41</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab8dba7d65be66c2ef7f1caab02212c33"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR_MASK" ref="gab8dba7d65be66c2ef7f1caab02212c33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR_MASK</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM error mask. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00045">45</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga85826037a1733414ce23d7cd02b273ba"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR_PG_BOUNDARY" ref="ga85826037a1733414ce23d7cd02b273ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR_PG_BOUNDARY</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM page boundary error. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00049">49</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac5440bb04d861b39c11d9afeb9ad0dc8"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR_PG_SZ" ref="gac5440bb04d861b39c11d9afeb9ad0dc8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR_PG_SZ</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM page size error. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00053">53</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga38b1c4d3b6606e56dcb93551062182a4"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR_WRT_DATA" ref="ga38b1c4d3b6606e56dcb93551062182a4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR_WRT_DATA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM write data error. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00057">57</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga1f5de1268dd43506b5d4990ca05e8a6d"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR_IMG_SZ" ref="ga1f5de1268dd43506b5d4990ca05e8a6d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR_IMG_SZ</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM image too large error. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00061">61</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9a31978c04944110d98a61f54e7b08e1"></a><!-- doxytag: member="bootloader&#45;eeprom.h::EEPROM_ERR_ADDR" ref="ga9a31978c04944110d98a61f54e7b08e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EEPROM_ERR_ADDR</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define EEPROM invalid address error. </p>

<p>Definition at line <a class="el" href="bootloader-eeprom_8h_source.htm#l00065">65</a> of file <a class="el" href="bootloader-eeprom_8h_source.htm">bootloader-eeprom.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gabf9065877f2f5669ca2754d300aa97b2"></a><!-- doxytag: member="bootloader&#45;eeprom.h::halEepromInit" ref="gabf9065877f2f5669ca2754d300aa97b2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halEepromInit </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize EEPROM. </p>

</div>
</div>
<a class="anchor" id="gadf40eadf7ac2f56747fe8ea5a92c0470"></a><!-- doxytag: member="bootloader&#45;eeprom.h::halEepromShutdown" ref="gadf40eadf7ac2f56747fe8ea5a92c0470" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halEepromShutdown </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Shutdown the EEPROM to conserve power. </p>

</div>
</div>
<a class="anchor" id="ga798b3a04d68c97f03e1366c012fd4099"></a><!-- doxytag: member="bootloader&#45;eeprom.h::halEepromRead" ref="ga798b3a04d68c97f03e1366c012fd4099" args="(int32u address, int8u *data, int16u len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> halEepromRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a>&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37">int16u</a>&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from the external EEPROM. </p>
<p>This is the standard external EEPROM read function. The format of this call must not be altered. However, the content can be changed to work with a different device. To more easily work with a larger variety of external EEPROM/flash parts, the app bootloader will always call this function with addresses that are a multiple of 128 bytes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>The address to start reading from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>A pointer to where read data is stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The length of data to read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="group__bootloader__eeprom.htm#ga22f4fb5c642cc23a258ae9b7a7b121ef" title="Define EEPROM success status.">EEPROM_SUCCESS</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaed9c1417980d7bf93ebe875a416a0e16"></a><!-- doxytag: member="bootloader&#45;eeprom.h::halEepromWrite" ref="gaed9c1417980d7bf93ebe875a416a0e16" args="(int32u address, const int8u *data, int16u len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> halEepromWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a>&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37">int16u</a>&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write to the external EEPROM. </p>
<p>This is the standard external EEPROM write function. The format of this call must not be altered. However, the content can be changed to work with a different device. To more easily work with a larger variety of external EEPROM/flash parts, the app bootloader will always call this function with addresses that are a multiple of 128 bytes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>The address to start writing to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>A pointer to the data to write. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The length of data to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>EEPROM_SUCCESS </dd></dl>

</div>
</div>
</div>
<hr size="1">

<table border="0" cellspacing="0" cellpadding="0" width=100%>

<tr>

<td><address><small>

EmberZNet API Reference: For the STM32F103RET Host platform. <br>

EmberZNet 4.5.0 - Document 120-3025-000-45xx.

</small></address>

</td>

<td align="right">

<address><small>

Copyright &copy; 2006-2010 by Ember Corporation. All rights reserved.<br>

Generated Fri Jun 24 15:12:53 2011 with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.6.1.

</small></address>

</td>

</tr>

</table>

</body>

</html>
