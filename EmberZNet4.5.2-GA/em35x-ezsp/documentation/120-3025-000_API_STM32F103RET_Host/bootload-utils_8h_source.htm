<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>EmberZNet API Reference: For the STM32F103RET Host platform: bootload-utils.h Source File</title>

<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">

</head><body>

<table border="0" cellspacing="0" cellpadding="0"  width=100%>

<tr>

<td><img src="emberLogoSmallWebsiteVer.gif"></td>

<td> <div class="qindex">

<a class="qindex" href="main.htm">Home</a>&nbsp;

 | &nbsp;<a class="qindex" href="modules.htm">Modules</a>&nbsp;

 | &nbsp;<a class="qindex" href="annotated.htm">Data Structures</a>&nbsp;

 | &nbsp;<a class="qindex" href="files.htm">File List</a>&nbsp;

 | &nbsp;<a class="qindex" href="dirs.htm">Directories</a>&nbsp;

 | &nbsp;<a class="qindex" href="globals.htm">Index</a></div>

</td>

</table>
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="dir_20396ffc616a28dbb6d73622b23934c9.htm">app</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_99acc1c0b623527d651e7c133a8e2a3d.htm">util</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e6da62c56a0435eb47722847cf2fd045.htm">bootload</a>
  </div>
<div class="contents">
<h1>bootload-utils.h</h1><a href="bootload-utils_8h.htm">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00058"></a>00058 <span class="comment">// *******************************************************************</span>
<a name="l00059"></a>00059 <span class="comment">// Literals that are needed by the application.</span>
<a name="l00060"></a>00060 
<a name="l00066"></a><a class="code" href="group__Standalone__bootload.htm#ga46259b91722dd8b23503726d0ff84782">00066</a> <span class="preprocessor">#define BOOTLOAD_AUTH_COMMON_SIZE    16</span>
<a name="l00067"></a><a class="code" href="group__Standalone__bootload.htm#gaebacffaaffed77f0b40af1e12a11aa55">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define BOOTLOAD_AUTH_CHALLENGE_SIZE BOOTLOAD_AUTH_COMMON_SIZE</span>
<a name="l00068"></a><a class="code" href="group__Standalone__bootload.htm#gab279f692e45da4bd210a09564121ddae">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define BOOTLOAD_AUTH_RESPONSE_SIZE  BOOTLOAD_AUTH_COMMON_SIZE</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>
<a name="l00076"></a><a class="code" href="group__Standalone__bootload.htm#ga0bb58ffff72970f64cc3e038b19e55fe">00076</a> <span class="preprocessor">#define BOOTLOAD_HARDWARE_TAG_SIZE 16</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="preprocessor">#ifdef DOXYGEN_SHOULD_SKIP_THIS</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00082"></a><a class="code" href="group__Standalone__bootload.htm#gad6359d2c7ec802211ed9b35965583b7d">00082</a> <span class="keyword">enum</span> <a class="code" href="group__Standalone__bootload.htm#gad6359d2c7ec802211ed9b35965583b7d" title="Bootload modes supported by the bootload utility library.">bootloadMode</a>
<a name="l00083"></a>00083 <span class="preprocessor">#else</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="keyword">typedef</span> <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> <a class="code" href="group__Standalone__bootload.htm#gad6359d2c7ec802211ed9b35965583b7d" title="Bootload modes supported by the bootload utility library.">bootloadMode</a>;
<a name="l00085"></a>00085 <span class="keyword">enum</span>
<a name="l00086"></a>00086 <span class="preprocessor">#endif</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>{
<a name="l00089"></a><a class="code" href="group__Standalone__bootload.htm#ggad6359d2c7ec802211ed9b35965583b7dae5c39d92a264d0b7853c0c27d5eb6193">00089</a>   <a class="code" href="group__Standalone__bootload.htm#ggad6359d2c7ec802211ed9b35965583b7dae5c39d92a264d0b7853c0c27d5eb6193">BOOTLOAD_MODE_NONE</a>,
<a name="l00091"></a><a class="code" href="group__Standalone__bootload.htm#ggad6359d2c7ec802211ed9b35965583b7daf09b78c45ad5588fa745b2445496b179">00091</a>   <a class="code" href="group__Standalone__bootload.htm#ggad6359d2c7ec802211ed9b35965583b7daf09b78c45ad5588fa745b2445496b179">BOOTLOAD_MODE_PASSTHRU</a>,
<a name="l00092"></a>00092 };
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="preprocessor">#ifdef DOXYGEN_SHOULD_SKIP_THIS</span>
<a name="l00095"></a>00095 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="group__Standalone__bootload.htm#ga0d9aa56e997feecd0af723b0e0832c96">00106</a> <span class="keyword">enum</span> <a class="code" href="group__Standalone__bootload.htm#ga0d9aa56e997feecd0af723b0e0832c96" title="A bootload state is a value that an application can check to see if bootloading is...">bootloadState</a>
<a name="l00107"></a>00107 <span class="preprocessor">#else</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span><span class="keyword">typedef</span> <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> <a class="code" href="group__Standalone__bootload.htm#ga0d9aa56e997feecd0af723b0e0832c96" title="A bootload state is a value that an application can check to see if bootloading is...">bootloadState</a>;
<a name="l00109"></a>00109 <span class="keyword">enum</span>
<a name="l00110"></a>00110 <span class="preprocessor">#endif</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>{
<a name="l00112"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96af2dd3c800bcf081e86b4376341344ab0">00112</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96af2dd3c800bcf081e86b4376341344ab0">BOOTLOAD_STATE_NORMAL</a>,                  
<a name="l00113"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a25aa09b089d337bbae7fd448785057b0">00113</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a25aa09b089d337bbae7fd448785057b0">BOOTLOAD_STATE_QUERY</a>,                   
<a name="l00114"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96acec20473acb40368cf005b1507590f3a">00114</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96acec20473acb40368cf005b1507590f3a">BOOTLOAD_STATE_WAIT_FOR_AUTH_CHALLENGE</a>, 
<a name="l00115"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a3d2c65568b5ce979cfcc86a7c365f0f5">00115</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a3d2c65568b5ce979cfcc86a7c365f0f5">BOOTLOAD_STATE_WAIT_FOR_AUTH_RESPONSE</a>,  
<a name="l00116"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a12ce4fb4c2d187c75a6008c03ed4734d">00116</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a12ce4fb4c2d187c75a6008c03ed4734d">BOOTLOAD_STATE_DELAY_BEFORE_START</a>,      
<a name="l00117"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96acc3fda1b3b6b1a8154bef1c045df6443">00117</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96acc3fda1b3b6b1a8154bef1c045df6443">BOOTLOAD_STATE_START_UNICAST_BOOTLOAD</a>,  
<a name="l00118"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96aae9727414f3dd62774fd13c0c93a9d14">00118</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96aae9727414f3dd62774fd13c0c93a9d14">BOOTLOAD_STATE_START_BROADCAST_BOOTLOAD</a>,
<a name="l00119"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a671d63c7a4d1cc2757358a8a2efd4723">00119</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a671d63c7a4d1cc2757358a8a2efd4723">BOOTLOAD_STATE_START_SENDING_IMAGE</a>,     
<a name="l00120"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a2096b6bc01f079370487e9f89f0db2f5">00120</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a2096b6bc01f079370487e9f89f0db2f5">BOOTLOAD_STATE_SENDING_IMAGE</a>,           
<a name="l00121"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a0b725f41d59728e0e0ac21459fdc97f9">00121</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a0b725f41d59728e0e0ac21459fdc97f9">BOOTLOAD_STATE_WAIT_FOR_IMAGE_ACK</a>,      
<a name="l00122"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96abaa749d4f8f29e11c7816905baaeb494">00122</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96abaa749d4f8f29e11c7816905baaeb494">BOOTLOAD_STATE_WAIT_FOR_COMPLETE_ACK</a>,   
<a name="l00123"></a><a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a9c95543122488c0cedc265b92e5f2615">00123</a>   <a class="code" href="group__Standalone__bootload.htm#gga0d9aa56e997feecd0af723b0e0832c96a9c95543122488c0cedc265b92e5f2615">BOOTLOAD_STATE_DONE</a>                     
<a name="l00124"></a>00124 };
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="comment">// *******************************************************************</span>
<a name="l00128"></a>00128 <span class="comment">// Public functions that are called by the application.</span>
<a name="l00129"></a>00129 
<a name="l00143"></a>00143 <span class="keywordtype">void</span> <a class="code" href="group__Standalone__bootload.htm#ga4f3a0fd9645263c43705658c59ddc641" title="Bootload library initialization.">bootloadUtilInit</a>(<a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> appPort, <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> bootloadPort);
<a name="l00144"></a>00144 
<a name="l00166"></a>00166 <a class="code" href="group__ember__types.htm#ga333d7a94b63d29c627eb16b0667371ec" title="Return type for Ember functions.">EmberStatus</a> <a class="code" href="group__Standalone__bootload.htm#ga818ad1afaef891ce79166f125aedbeff" title="Start the bootload process on a remote node that is currently running stack/application...">bootloadUtilSendRequest</a>(<a class="code" href="group__ember__types.htm#ga02a0425b19cee073902ca89f6a16d8e1" title="EUI 64-bit ID (an IEEE address).">EmberEUI64</a> targetEui,
<a name="l00167"></a>00167                                   <a class="code" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37" title="A typedef to make the size of the variable explicitly known.">int16u</a> mfgId,
<a name="l00168"></a>00168                                   <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> hardwareTag[<a class="code" href="group__Standalone__bootload.htm#ga0bb58ffff72970f64cc3e038b19e55fe" title="Size of hardware tag which is an array of int8u.">BOOTLOAD_HARDWARE_TAG_SIZE</a>],
<a name="l00169"></a>00169                                   <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> encryptKey[<a class="code" href="group__Standalone__bootload.htm#ga46259b91722dd8b23503726d0ff84782">BOOTLOAD_AUTH_COMMON_SIZE</a>],
<a name="l00170"></a>00170                                   <a class="code" href="group__Standalone__bootload.htm#gad6359d2c7ec802211ed9b35965583b7d" title="Bootload modes supported by the bootload utility library.">bootloadMode</a> mode);
<a name="l00171"></a>00171 
<a name="l00184"></a>00184 <span class="keywordtype">void</span> <a class="code" href="group__Standalone__bootload.htm#ga209915103771a4c19dc17b5697fefa49" title="A function to send query message to gather basic information about the node(s).">bootloadUtilSendQuery</a>(<a class="code" href="group__ember__types.htm#ga02a0425b19cee073902ca89f6a16d8e1" title="EUI 64-bit ID (an IEEE address).">EmberEUI64</a> target);
<a name="l00185"></a>00185 
<a name="l00203"></a>00203 <span class="keywordtype">void</span> <a class="code" href="group__Standalone__bootload.htm#ga308447b903fb3113a016da273c000425" title="Start the bootload process on a remote node that is already running in bootload mode...">bootloadUtilStartBootload</a>(<a class="code" href="group__ember__types.htm#ga02a0425b19cee073902ca89f6a16d8e1" title="EUI 64-bit ID (an IEEE address).">EmberEUI64</a> target, <a class="code" href="group__Standalone__bootload.htm#gad6359d2c7ec802211ed9b35965583b7d" title="Bootload modes supported by the bootload utility library.">bootloadMode</a> mode);
<a name="l00204"></a>00204 
<a name="l00210"></a>00210 <span class="keywordtype">void</span> <a class="code" href="group__Standalone__bootload.htm#ga97082ca0b6380dc00afbe3b30bf6ba95" title="A function in the application&amp;#39;s heartbeat or tick function that contains basic...">bootloadUtilTick</a>(<span class="keywordtype">void</span>);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 
<a name="l00213"></a>00213 <span class="comment">// *******************************************************************</span>
<a name="l00214"></a>00214 <span class="comment">// Callback functions used by the bootload library.</span>
<a name="l00215"></a>00215 
<a name="l00234"></a>00234 <span class="keywordtype">boolean</span> <a class="code" href="group__Standalone__bootload.htm#ga8543eca6088016c2a0773f2ad03ca588" title="A callback function invoked by bootload-utils when a bootload request message is...">bootloadUtilLaunchRequestHandler</a>(<a class="code" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37" title="A typedef to make the size of the variable explicitly known.">int16u</a> manufacturerId,
<a name="l00235"></a>00235                                   <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> hardwareTag[<a class="code" href="group__Standalone__bootload.htm#ga0bb58ffff72970f64cc3e038b19e55fe" title="Size of hardware tag which is an array of int8u.">BOOTLOAD_HARDWARE_TAG_SIZE</a>],
<a name="l00236"></a>00236                                   <a class="code" href="group__ember__types.htm#ga02a0425b19cee073902ca89f6a16d8e1" title="EUI 64-bit ID (an IEEE address).">EmberEUI64</a> sourceEui);
<a name="l00237"></a>00237 
<a name="l00267"></a>00267 <span class="keywordtype">void</span> <a class="code" href="group__Standalone__bootload.htm#ga749f85c007c4a4dc6b00054ae4941068" title="A callback function invoked by bootload-utils when a bootload query response message...">bootloadUtilQueryResponseHandler</a>(<span class="keywordtype">boolean</span> bootloaderActive,
<a name="l00268"></a>00268                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37" title="A typedef to make the size of the variable explicitly known.">int16u</a> manufacturerId,
<a name="l00269"></a>00269                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> hardwareTag[<a class="code" href="group__Standalone__bootload.htm#ga0bb58ffff72970f64cc3e038b19e55fe" title="Size of hardware tag which is an array of int8u.">BOOTLOAD_HARDWARE_TAG_SIZE</a>],
<a name="l00270"></a>00270                                       <a class="code" href="group__ember__types.htm#ga02a0425b19cee073902ca89f6a16d8e1" title="EUI 64-bit ID (an IEEE address).">EmberEUI64</a> targetEui,
<a name="l00271"></a>00271                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> bootloaderCapabilities,
<a name="l00272"></a>00272                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> platform,
<a name="l00273"></a>00273                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> micro,
<a name="l00274"></a>00274                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749" title="A typedef to make the size of the variable explicitly known.">int8u</a> phy,
<a name="l00275"></a>00275                                       <a class="code" href="group__stm32f103ret__iar__config.htm#ga40790a257990626db514387099889f37" title="A typedef to make the size of the variable explicitly known.">int16u</a> blVersion);
<a name="l00276"></a>00276 
<a name="l00289"></a>00289 <span class="keywordtype">void</span> <a class="code" href="group__Standalone__bootload.htm#ga006e68f885620a9df038ab8e411f27a1" title="A function called by a parent node to send an authentication response message to...">bootloadUtilSendAuthResponse</a>(<a class="code" href="group__ember__types.htm#ga02a0425b19cee073902ca89f6a16d8e1" title="EUI 64-bit ID (an IEEE address).">EmberEUI64</a> target);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 <span class="comment">// *******************************************************************</span>
<a name="l00293"></a>00293 <span class="comment">// Bootload state variables</span>
<a name="l00294"></a>00294 
<a name="l00299"></a>00299 <span class="keyword">extern</span> <a class="code" href="group__Standalone__bootload.htm#ga0d9aa56e997feecd0af723b0e0832c96" title="A bootload state is a value that an application can check to see if bootloading is...">bootloadState</a> <a class="code" href="group__Standalone__bootload.htm#ga2d4f8874078cfed8e420392237e14cbe">blState</a>;
<a name="l00300"></a><a class="code" href="group__Standalone__bootload.htm#ga379208e17c0584e6672f6d6ec3c71d50">00300</a> <span class="preprocessor">#define IS_BOOTLOADING ((blState != BOOTLOAD_STATE_NORMAL) &amp;&amp; \</span>
<a name="l00301"></a>00301 <span class="preprocessor">                        (blState != BOOTLOAD_STATE_DONE))</span>
<a name="l00302"></a>00302 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1">

<table border="0" cellspacing="0" cellpadding="0" width=100%>

<tr>

<td><address><small>

EmberZNet API Reference: For the STM32F103RET Host platform. <br>

EmberZNet 4.5.0 - Document 120-3025-000-45xx.

</small></address>

</td>

<td align="right">

<address><small>

Copyright &copy; 2006-2010 by Ember Corporation. All rights reserved.<br>

Generated Fri Jun 24 15:12:51 2011 with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.6.1.

</small></address>

</td>

</tr>

</table>

</body>

</html>
