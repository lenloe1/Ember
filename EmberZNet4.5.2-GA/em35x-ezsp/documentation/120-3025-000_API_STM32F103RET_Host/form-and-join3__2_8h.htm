<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">

<title>EmberZNet API Reference: For the STM32F103RET Host platform: form-and-join3_2.h File Reference</title>

<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">

</head><body>

<table border="0" cellspacing="0" cellpadding="0"  width=100%>

<tr>

<td><img src="emberLogoSmallWebsiteVer.gif"></td>

<td> <div class="qindex">

<a class="qindex" href="main.htm">Home</a>&nbsp;

 | &nbsp;<a class="qindex" href="modules.htm">Modules</a>&nbsp;

 | &nbsp;<a class="qindex" href="annotated.htm">Data Structures</a>&nbsp;

 | &nbsp;<a class="qindex" href="files.htm">File List</a>&nbsp;

 | &nbsp;<a class="qindex" href="dirs.htm">Directories</a>&nbsp;

 | &nbsp;<a class="qindex" href="globals.htm">Index</a></div>

</td>

</table>
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="dir_20396ffc616a28dbb6d73622b23934c9.htm">app</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_99acc1c0b623527d651e7c133a8e2a3d.htm">util</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_21398d48542cbc390b0d9c300f4bc2d4.htm">common</a>
  </div>
<div class="contents">
<h1>form-and-join3_2.h File Reference</h1>
<p>Utilities for forming and joining networks. Deprecated and will be removed from a future release. Use <a class="el" href="form-and-join_8h.htm" title="Utilities for forming and joining networks.">form-and-join.h</a> instead.  
<a href="#_details">More...</a></p>

<p><a href="form-and-join3__2_8h_source.htm">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424">formAndJoinScanType</a> { <br/>
&nbsp;&nbsp;<a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424a034516f2cabf2bfbd2b3a0ca5a7cbda1">FORM_AND_JOIN_NOT_SCANNING</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424a8c885364747cb4495c6ceb3ccd1789b8">FORM_AND_JOIN_ENERGY_SCAN</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424acdd64745dc2eb5207ddcb4bc389da181">FORM_AND_JOIN_PAN_ID_SCAN</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424a905d9eb4ae7e5f52a5ba68663dd96f7e">FORM_AND_JOIN_JOINABLE_SCAN</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424a83bc4f800c85d9877b719a3196e00276">FORM_AND_JOIN_CROSSTALK_SCAN</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="form-and-join3__2_8h.htm#acd54f5434fceb9f1dfc2a1ef1b03cb44">formZigbeeNetwork3_2</a> (<a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a> channelMask, <a class="el" href="group__stm32f103ret__iar__config.htm#gac2017492c2bef74dd69c73d0c3452222">int8s</a> radioTxPower, <a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *extendedPanIdDesired)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="form-and-join3__2_8h.htm#ade926fe8f5c2596be0dcf14bff21c5b1">joinZigbeeNetwork3_2</a> (<a class="el" href="group__ember__types.htm#ga32518ff17fd5b898204c3e131077a1ac">EmberNodeType</a> nodeType, <a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a> channelMask, <a class="el" href="group__stm32f103ret__iar__config.htm#gac2017492c2bef74dd69c73d0c3452222">int8s</a> radioTxPower, <a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *extendedPanIdDesired)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="form-and-join3__2_8h.htm#a578b180605cc632d5bd8b87759ca9f32">scanError</a> (<a class="el" href="error_8h.htm#a333d7a94b63d29c627eb16b0667371ec">EmberStatus</a> status)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Utilities for forming and joining networks. Deprecated and will be removed from a future release. Use <a class="el" href="form-and-join_8h.htm" title="Utilities for forming and joining networks.">form-and-join.h</a> instead. </p>
<p>See <a class="el" href="group__networks.htm">Forming and Joining Networks</a> for documentation. </p>

<p>Definition in file <a class="el" href="form-and-join3__2_8h_source.htm">form-and-join3_2.h</a>.</p>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a8a940ad573e8736ba4dce288f0c78424"></a><!-- doxytag: member="form&#45;and&#45;join3_2.h::formAndJoinScanType" ref="a8a940ad573e8736ba4dce288f0c78424" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="form-and-join3__2_8h.htm#a8a940ad573e8736ba4dce288f0c78424">formAndJoinScanType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The current reason for scanning. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a8a940ad573e8736ba4dce288f0c78424a034516f2cabf2bfbd2b3a0ca5a7cbda1"></a><!-- doxytag: member="FORM_AND_JOIN_NOT_SCANNING" ref="a8a940ad573e8736ba4dce288f0c78424a034516f2cabf2bfbd2b3a0ca5a7cbda1" args="" -->FORM_AND_JOIN_NOT_SCANNING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a8a940ad573e8736ba4dce288f0c78424a8c885364747cb4495c6ceb3ccd1789b8"></a><!-- doxytag: member="FORM_AND_JOIN_ENERGY_SCAN" ref="a8a940ad573e8736ba4dce288f0c78424a8c885364747cb4495c6ceb3ccd1789b8" args="" -->FORM_AND_JOIN_ENERGY_SCAN</em>&nbsp;</td><td>
<p>Energy scan for finding a quiet channel. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a8a940ad573e8736ba4dce288f0c78424acdd64745dc2eb5207ddcb4bc389da181"></a><!-- doxytag: member="FORM_AND_JOIN_PAN_ID_SCAN" ref="a8a940ad573e8736ba4dce288f0c78424acdd64745dc2eb5207ddcb4bc389da181" args="" -->FORM_AND_JOIN_PAN_ID_SCAN</em>&nbsp;</td><td>
<p>Active scan to see which PAN IDs are in use. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a8a940ad573e8736ba4dce288f0c78424a905d9eb4ae7e5f52a5ba68663dd96f7e"></a><!-- doxytag: member="FORM_AND_JOIN_JOINABLE_SCAN" ref="a8a940ad573e8736ba4dce288f0c78424a905d9eb4ae7e5f52a5ba68663dd96f7e" args="" -->FORM_AND_JOIN_JOINABLE_SCAN</em>&nbsp;</td><td>
<p>Active scan for a network to join. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a8a940ad573e8736ba4dce288f0c78424a83bc4f800c85d9877b719a3196e00276"></a><!-- doxytag: member="FORM_AND_JOIN_CROSSTALK_SCAN" ref="a8a940ad573e8736ba4dce288f0c78424a83bc4f800c85d9877b719a3196e00276" args="" -->FORM_AND_JOIN_CROSSTALK_SCAN</em>&nbsp;</td><td>
<p>Active scan to work around channel crosstalk. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="form-and-join3__2_8h_source.htm#l00021">21</a> of file <a class="el" href="form-and-join3__2_8h_source.htm">form-and-join3_2.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acd54f5434fceb9f1dfc2a1ef1b03cb44"></a><!-- doxytag: member="form&#45;and&#45;join3_2.h::formZigbeeNetwork3_2" ref="acd54f5434fceb9f1dfc2a1ef1b03cb44" args="(int32u channelMask, int8s radioTxPower, int8u *extendedPanIdDesired)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void formZigbeeNetwork3_2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a>&nbsp;</td>
          <td class="paramname"> <em>channelMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#gac2017492c2bef74dd69c73d0c3452222">int8s</a>&nbsp;</td>
          <td class="paramname"> <em>radioTxPower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *&nbsp;</td>
          <td class="paramname"> <em>extendedPanIdDesired</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Form a network. </p>
<p>This performs the following actions:</p>
<ol type="1">
<li>Do an energy scan on the indicated channels and randomly choose one from amongst those with the least average energy.</li>
<li>Randomly pick a short PAN ID that does not appear during an active scan on the chosen channel.</li>
<li>use the Extended PAN ID passed in or pick a random one if the Extended PAN ID passed in is "0" or a null pointer.</li>
<li>Form a network using the chosen channel, short PAN ID, and extended PAN ID.</li>
</ol>
<p>If any errors occur, the status code is passed to <a class="el" href="form-and-join3__2_8h.htm#a578b180605cc632d5bd8b87759ca9f32" title="A callback the application needs to provided.">scanError()</a> and no network is formed. Success is indicated by calling emberStackStatusHandler() with the EMBER_NETWORK_UP status value.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>channelMask</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>radioTxPower</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>extendedPanIdDesired</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade926fe8f5c2596be0dcf14bff21c5b1"></a><!-- doxytag: member="form&#45;and&#45;join3_2.h::joinZigbeeNetwork3_2" ref="ade926fe8f5c2596be0dcf14bff21c5b1" args="(EmberNodeType nodeType, int32u channelMask, int8s radioTxPower, int8u *extendedPanIdDesired)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void joinZigbeeNetwork3_2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ember__types.htm#ga32518ff17fd5b898204c3e131077a1ac">EmberNodeType</a>&nbsp;</td>
          <td class="paramname"> <em>nodeType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga05aebcd1ffd9d69bda7b936f0cbd64b5">int32u</a>&nbsp;</td>
          <td class="paramname"> <em>channelMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#gac2017492c2bef74dd69c73d0c3452222">int8s</a>&nbsp;</td>
          <td class="paramname"> <em>radioTxPower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stm32f103ret__iar__config.htm#ga29edc2328533c8dbc46be2d7b654c749">int8u</a> *&nbsp;</td>
          <td class="paramname"> <em>extendedPanIdDesired</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Join a network. </p>
<p>This tries to join the first network found on the indicated channels that</p>
<ol type="1">
<li>currently permits joining</li>
<li>matches the stack profile of the application</li>
<li>matches the Extended PAN ID passed in, or if "0" is passed in it matches any Extended PAN ID.</li>
</ol>
<p>If any errors occur, the status code is passed to <a class="el" href="form-and-join3__2_8h.htm#a578b180605cc632d5bd8b87759ca9f32" title="A callback the application needs to provided.">scanError()</a> and no network is joined. Success is indicated by calling emberStackStatusHandler() with the EMBER_NETWORK_UP status value.</p>
<p>With some board layouts, the em250 is susceptible to a dual channel issue in which packets from 12 channels above or below can sometimes be heard faintly. This affects channels 11, 12, 13, 14, 23, 24, 25, and 26. Hardware reference designs EM250_REF_DES_LAT, version C0 and EM250_REF_DES_CER, version B0 solve the problem.</p>
<p>This function also implements a software workaround. After discovering a network on one of the susceptible channels, joinZigbeeNetwork also scans the channel 12 up or down. If the same network is found there, it chooses the correct one by comparing the link quality of the received beacons.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nodeType</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channelMask</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>radioTxPower</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>extendedPanIdDesired</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a578b180605cc632d5bd8b87759ca9f32"></a><!-- doxytag: member="form&#45;and&#45;join3_2.h::scanError" ref="a578b180605cc632d5bd8b87759ca9f32" args="(EmberStatus status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scanError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="error_8h.htm#a333d7a94b63d29c627eb16b0667371ec">EmberStatus</a>&nbsp;</td>
          <td class="paramname"> <em>status</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A callback the application needs to provided. </p>
<p>If an error occurs while attempting to form or join a network, this procedure is called and the form or join effort is aborted.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<hr size="1">

<table border="0" cellspacing="0" cellpadding="0" width=100%>

<tr>

<td><address><small>

EmberZNet API Reference: For the STM32F103RET Host platform. <br>

EmberZNet 4.5.0 - Document 120-3025-000-45xx.

</small></address>

</td>

<td align="right">

<address><small>

Copyright &copy; 2006-2010 by Ember Corporation. All rights reserved.<br>

Generated Fri Jun 24 15:12:52 2011 with <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.6.1.

</small></address>

</td>

</tr>

</table>

</body>

</html>
